<div class="leave-form-container">
    <h2>Apply for Leave</h2>

    <form (ngSubmit)="applyLeave()" #leaveForm="ngForm" class="leave-form">
        <div class="form-group">
            <label for="startDate">Start Date</label>
            <input type="date" id="startDate" name="startDate" [(ngModel)]="leave.startDate" required />
        </div>

        <div class="form-group">
            <label for="endDate">End Date</label>
            <input type="date" id="endDate" name="endDate" [(ngModel)]="leave.endDate" required />
        </div>

        <div class="form-group">
            <label for="reason">Reason</label>
            <textarea id="reason" name="reason" [(ngModel)]="leave.reason" required></textarea>
        </div>

        <button type="submit" [disabled]="loading">
            {{ loading ? 'Submitting...' : 'Apply Leave' }}
        </button>


        <p *ngIf="message" [class.success]="message.startsWith('✅')" [class.error]="message.startsWith('❌')">
            {{ message }}
        </p>
    </form>
</div>
<h3 class="leave-title">Your Leave Applications</h3>

<div class="table-responsive">
    <table *ngIf="leaves.length > 0" class="leave-table">
        <thead>
            <tr>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Reason</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let l of leaves">
                <td>{{ l.startDate | date: 'dd-MMM-yyyy' }}</td>
                <td>{{ l.endDate | date: 'dd-MMM-yyyy' }}</td>
                <td>{{ l.reason }}</td>
                <td [ngClass]="{
            'pending': l.status === 'Pending',
            'approved': l.status === 'Approved',
            'rejected': l.status === 'Rejected'
          }">
                    {{ l.status }}
                </td>
            </tr>
        </tbody>
    </table>

    <p *ngIf="leaves.length === 0" class="no-records">
        No leave applications found.
    </p>
</div>